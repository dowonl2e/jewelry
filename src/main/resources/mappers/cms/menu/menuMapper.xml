<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jewelry.cms.menu.mapper.MenuMapper">

	<select id="selectMenuList" parameterType="MenuTO" resultType="MenuVO">
		SELECT menu_id, menu_nm, menu_link, menu_ord, up_menu_id, use_yn
						, (SELECT COUNT(*) FROM tb_menu where up_menu_id = a.menu_id and menu_depth = (a.menu_depth+1)) as child_cnt
		FROM tb_menu a
		WHERE menu_depth = #{menu_depth}
		<if test='use_yn != null and !use_yn.equals("")'>
			AND use_yn = #{use_yn}
		</if>
		ORDER BY menu_ord ASC, menu_id ASC
	</select>
	
</mapper>